import QtQuick 2.12
import QtQuick.Window 2.12
import QtQuick.Controls 2.12
import QtQml 2.12
import QtQuick.Dialogs 1.3
import QtQuick.Layouts 1.3
import QtQuick.Controls.Styles 1.4
import QtQuick.Controls.Material 2.12
import ParticleValueComponent 1.0
import "../widget"

Item {
    height:120
    width: parent.width
    ParticleValueComponent {
        id: particleValueComponent

        onBindComponent: {
            title.text = getLabel()
        }

        onPartileDataChanged: {
            var datas = particleValueComponent.getPartileDatas()
            particleValueView.setPoints(datas,255)
        }
    }

    property var particleData0: [255,254,253,252,251,250,249,249,248,247,246,245,244,243,243,242,241,240,239,238,237,237,236,235,234,233,232,231,231,230,229,228,227,226,226,225,224,223,222,221,220,220,219,218,217,216,215,214,214,213,212,211,210,209,208,208,207,206,205,204,203,202,202,201,200,199,198,197,197,196,195,194,193,192,191,191,190,189,188,187,186,185,185,184,183,182,181,180,179,179,178,177,176,175,174,173,173,172,171,170,169,168,168,167,166,165,164,163,162,162,161,160,159,158,157,156,156,155,154,153,152,151,150,150,149,148,147,146,145,144,144,143,142,141,140,139,139,138,137,136,135,134,133,133,132,131,130,129,128,127,127,126,125,124,123,122,121,121,120,119,118,117,116,115,115,114,113,112,111,110,110,109,108,107,106,105,104,104,103,102,101,100,99,98,98,97,96,95,94,93,92,92,91,90,89,88,87,86,86,85,84,83,82,81,81,80,79,78,77,76,75,75,74,73,72,71,70,69,69,68,67,66,65,64,63,63,62,61,60,59,58,57,57,56,55,54,53,52,52,51,50,49,48,47,46,46,45,44,43,42,41,40,40,39,38,37,36,35,34,34,33,32,31,30,29,28,28,27,26,25,24,23,23,22,21,20,19,18,17,17,16,15,14,13,12,11,11,10,9,8,7,6,5,5,4,3,2,1,0,0]
    property var particleData1: [255,254,253,252,251,250,249,249,248,247,246,245,244,243,243,242,241,240,239,238,237,237,236,235,234,233,232,231,231,230,229,228,227,226,226,225,224,223,222,221,220,220,219,218,217,216,215,214,214,213,212,211,210,209,208,208,207,206,205,204,203,202,202,201,200,199,198,197,197,196,195,194,193,192,191,191,190,189,188,187,186,185,185,184,183,182,181,180,179,179,178,177,176,175,174,173,173,172,171,170,169,168,168,167,166,165,164,163,162,162,161,160,159,158,157,156,156,155,154,153,152,151,150,150,149,148,147,146,145,144,144,143,142,141,140,139,139,138,137,136,135,134,133,133,132,131,130,129,128,127,127,126,125,124,123,122,121,121,120,119,118,117,116,115,115,114,113,112,111,110,110,109,108,107,106,105,104,104,103,102,101,100,99,98,98,97,96,95,94,93,92,92,91,90,89,88,87,86,86,85,84,83,82,81,81,80,79,78,77,76,75,75,74,73,72,71,70,69,69,68,67,66,65,64,63,63,62,61,60,59,58,57,57,56,55,54,53,52,52,51,50,49,48,47,46,46,45,44,43,42,41,40,40,39,38,37,36,35,34,34,33,32,31,30,29,28,28,27,26,25,24,23,23,22,21,20,19,18,17,17,16,15,14,13,12,11,11,10,9,8,7,6,5,5,4,3,2,1,0,0]
    property var particleData2: [0,3,6,10,13,17,20,24,27,31,34,38,41,44,48,51,55,58,62,65,69,72,76,79,82,86,89,93,96,100,103,107,110,114,117,121,124,127,131,134,138,141,145,148,152,155,159,162,165,169,172,176,179,183,186,190,193,197,200,203,207,210,214,217,221,224,228,231,235,238,242,245,248,252,255,253,252,251,250,249,248,247,245,244,243,242,241,240,239,237,236,235,234,233,232,231,229,228,227,226,225,224,223,222,220,219,218,217,216,215,214,212,211,210,209,208,207,206,204,203,202,201,200,199,198,197,195,194,193,192,191,190,189,187,186,185,184,183,182,181,179,178,177,176,175,174,173,171,170,169,168,167,166,165,164,162,161,160,159,158,157,156,154,153,152,151,150,149,148,146,145,144,143,142,141,140,139,137,136,135,134,133,132,131,129,128,127,126,125,124,123,121,120,119,118,117,116,115,113,112,111,110,109,108,107,106,104,103,102,101,100,99,98,96,95,94,93,92,91,90,88,87,86,85,84,83,82,81,79,78,77,76,75,74,73,71,70,69,68,67,66,65,63,62,61,60,59,58,57,56,54,53,52,51,50,49,48,46,45,44,43,42,41,40,38,37,36,35,34,33,32,30,29,28,27,26,25,24,23,21,20,19,18,17,16,15,13,12,11,10,9,8,7,5,4,3,2,1,0,0]
    property var particleData3: [0,0,0,1,2,3,4,6,8,10,12,14,17,20,23,26,30,33,37,41,44,49,53,57,61,66,71,75,80,85,90,95,100,105,110,115,120,125,130,135,140,145,151,156,161,165,170,175,180,185,189,194,198,202,206,211,214,218,222,225,229,232,235,238,240,243,245,247,249,250,252,253,253,254,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,254,253,253,252,250,249,247,245,243,240,238,235,232,229,225,222,218,214,211,206,202,198,194,189,185,180,175,170,165,161,156,151,145,140,135,130,125,120,115,110,105,100,95,90,85,80,75,71,66,61,57,53,49,44,41,37,33,30,26,23,20,17,14,12,10,8,6,4,3,2,1,0,0,0]
    property var particleData4: [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,254,253,252,251,249,246,244,241,238,234,230,226,222,217,212,207,202,197,191,186,180,174,168,162,156,149,143,137,130,124,117,111,105,98,92,86,80,74,68,63,57,52,47,42,37,32,28,24,20,16,13,10,8,5,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    property var particleData5: [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,254,254,254,254,254,253,253,253,252,252,251,255,250,249,248,247,247,246,245,244,243,255,241,239,238,255,236,234,233,232,230,229,255,226,224,223,221,219,218,216,214,255,211,209,207,205,203,201,199,198,196,194,192,189,187,255,183,181,179,177,175,172,170,168,166,164,161,159,255,155,152,150,148,145,143,141,138,136,255,131,129,255,125,122,120,255,115,113,111,108,106,104,255,99,97,95,92,90,88,86,83,81,79,77,75,73,70,68,255,64,62,60,58,56,54,52,255,48,47,45,43,41,39,38,36,34,33,31,29,28,26,25,23,255,21,19,18,17,16,14,255,12,11,10,9,8,255,6,255,5,4,3,255,2,255,1,255,1,0,255,0,255,0,0,255,0,255,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0]


    Text {
        id: title
        anchors.top: parent.top
        anchors.left: parent.left
        anchors.right: parent.right
        anchors.topMargin: editPropertyPanelHMargin
        anchors.rightMargin: editPropertyPanelHMargin
        anchors.leftMargin: editPropertyPanelHMargin
        color: "#FFFFFF"
        text: particleValueComponent.labelText
    }

    RowLayout {
        height: 80
        anchors.left: parent.left
        anchors.right: parent.right
        anchors.rightMargin: editPropertyPanelHMargin
        anchors.leftMargin: editPropertyPanelHMargin
        anchors.topMargin: 4
        anchors.top:title.bottom
        spacing: 10

        ParticleValueView{
            focus: true
            id:particleValueView
            Layout.fillWidth: true
            height: 80

            onDataChanged: {
                particleValueComponent.setPartileDatas(datas)
            }
        }


        Item{
            width:120
            height: parent.height

            BasicComboBox {
                id:valueComboBox
                editable: false
                height:20
                width:parent.width
                anchors.top: parent.top
                backgroundColor: "#2D2F33"
                itemNormalColor: "#2D2F33"
                borderColor: "transparent"
                itemHighlightColor: "#2D2F33"
                itemHeight:26
                showCount: 15
                model: valueTitleList
                onCurrentIndexChanged: {
                    var colors = []
                    if(currentIndex == 1){
                        particleValueView.setPoints(particleData0,255)
                        particleValueComponent.setPartileDatas(particleData0)
                    }else  if(currentIndex == 2){
                        particleValueView.setPoints(particleData1,255)
                        particleValueComponent.setPartileDatas(particleData1)

                    } else if(currentIndex === 3){
                        particleValueView.setPoints(particleData2,255)
                        particleValueComponent.setPartileDatas(particleData2)
                    }else if(currentIndex === 4){
                        particleValueView.setPoints(particleData3,255)
                        particleValueComponent.setPartileDatas(particleData3)
                    } else if(currentIndex == 5){
                        particleValueView.setPoints(particleData4,255)
                        particleValueComponent.setPartileDatas(particleData4)

                    } else if(currentIndex == 6){
                        particleValueView.setPoints(particleData5,255)
                        particleValueComponent.setPartileDatas(particleData5)

                    }
                }
            }

            Button{
                id:random
                text:"Random"
                height: 20
                width: parent.width
                anchors.left: parent.left
                anchors.top: valueComboBox.bottom
                anchors.topMargin: 2
                onClicked: {
                    particleValueView.random()
                }
            }

            Button{
                id:smooth
                text:"Smooth"
                height: 20
                width: parent.width/2
                anchors.left: parent.left
                anchors.top: random.bottom
                anchors.topMargin: 2
                onClicked: {
                    particleValueView.smoothData()
                }
            }

            Button{
                id:revert
                text:"Revert"
                height: 20
                width: parent.width/2
                anchors.left: smooth.right
                anchors.top: random.bottom
                anchors.topMargin: 2
                anchors.leftMargin: 2
                onClicked: {
                    particleValueView.revert()
                }
            }
        }

    }


    ListModel{
        id:valueTitleList
        ListElement{
            text:"Custom"
        }
        ListElement{
            text:"Full"
        }
        ListElement{
            text:"Linear"
        }
        ListElement{
            text:"Preset1"
        }
        ListElement{
            text:"Preset2"
        }
        ListElement{
            text:"Preset3"
        }
        ListElement{
            text:"Preset4"
        }
    }


    Component.onCompleted: {
        for(var i=0;i<300;++i){
            particleData0[i] = 255
        }
        particleValueView.setPoints(particleData0,255)

        onComponentLoaded(particleValueComponent)
    }
}
